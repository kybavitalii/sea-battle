(()=>{"use strict";var t={};t.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),(()=>{var e;t.g.importScripts&&(e=t.g.location+"");var n=t.g.document;if(!e&&n&&(n.currentScript&&(e=n.currentScript.src),!e)){var r=n.getElementsByTagName("script");if(r.length)for(var o=r.length-1;o>-1&&!e;)e=r[o--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),t.p=e})();const e=JSON.parse('{"v":"TODO: Vitalii Kyba"}');function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function r(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(void 0,i=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,"string");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(o.key),"symbol"===n(i)?i:String(i)),o)}var i}t.p;var o=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.boardSize=6,this.amountShips=3,this.shipLength=3,this.shipsSunk=0,this.guesses=0,this.ships=[{locations:[{},{},{}],hits:["","",""]},{locations:[{},{},{}],hits:["","",""]},{locations:[{},{},{}],hits:["","",""]}]}var e,n;return e=t,(n=[{key:"randomGenerator",value:function(t,e){return Math.floor(Math.random()*(e-t)+t)}},{key:"setBoardSize",value:function(t){this.boardSize=t}},{key:"getBoardSize",value:function(){return this.boardSize}},{key:"clearHits",value:function(){for(var t=0;t<this.ships.length;t++)for(var e=0;e<this.ships[t].hits.length;e++)this.ships[t].hits[e]=""}},{key:"isSunk",value:function(t){for(var e=0;e<this.shipLength;e++)if("hit"!==t.hits[e])return!1;return!0}},{key:"findObjectIndex",value:function(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(r.row.toString()===e.row&&r.col.toString()===e.col)return n}return-1}},{key:"fireLogic",value:function(t,e,n){"hit"===e.hits[t]?(n.msg="Oops, you already hit that location!",n.isHit=!0):t>=0&&(e.hits[t]="hit",n.msg="HIT",n.isHit=!0,this.isSunk(e)&&(n.msg="You sank my battleship!",this.shipsSunk++,this.shipsSunk===this.amountShips&&(n.msg="You sank all my battleships, in  ".concat(this.guesses," guesses"),n.isOver=!0)))}},{key:"fire",value:function(t){this.guesses++;for(var e={isHit:!1,msg:"MISS",isOver:!1},n=0;n<this.amountShips;n++){var r=this.ships[n],o=this.findObjectIndex(r.locations,t);this.fireLogic(o,r,e)}return e}},{key:"generateShipLocations",value:function(){for(var t,e=0;e<this.amountShips;e++){do{t=this.generateShip()}while(this.collision(t));this.ships[e].locations=t}}},{key:"generateShip",value:function(){var t,e,n=this.randomGenerator(0,2);1===n?(t=Math.floor(Math.random()*this.boardSize),e=Math.floor(Math.random()*(this.boardSize-this.amountShips+1))):(t=Math.floor(Math.random()*(this.boardSize-this.amountShips+1)),e=Math.floor(Math.random()*this.boardSize));for(var r=[],o=0;o<this.amountShips;o++)1===n?r.push({row:t,col:e+o}):r.push({row:t+o,col:e});return r}},{key:"collision",value:function(t){for(var e=0;e<this.amountShips;e++)for(var n=this.ships[e],r=0;r<n.locations.length;r++)for(var o=n.locations[r],i=0;i<t.length;i++)if(o.row===t[i].row&&o.col===t[i].col)return!0;return!1}}])&&r(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,l(r.key),r)}}function a(t,e,n){return e&&u(t.prototype,e),n&&u(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function l(t){var e=function(t,e){if("object"!==i(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===i(e)?e:String(e)}var c=function(){function t(){var e,n,r;s(this,t),e=this,n="gameBoard",r=document.getElementById("game-board"),(n=l(n))in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r}return a(t,[{key:"clean",value:function(){this.gameBoard.innerHTML=""}},{key:"generateGrid",value:function(t){for(var e=0;e<=t;e++)for(var n=0;n<=t;n++){var r=document.createElement("div");r.classList.add("cell"),r.dataset.row=e.toString(),r.dataset.col=n.toString(),this.gameBoard.appendChild(r)}t++,this.gameBoard.style.setProperty("--grid-columns",t),this.gameBoard.style.setProperty("--grid-rows",t),this.gameBoard.style.setProperty("--board-bgc","#f2f2f2")}}]),t}(),f=function(){function t(){s(this,t)}return a(t,[{key:"getStatistic",value:function(t){var e=document.getElementsByClassName("cell")[0];e.classList.add("statistic"),e.textContent=" Потоплено 3 кораблі за ".concat(t," пострілів.")}}]),t}(),h=a((function t(e,n,r){s(this,t),this.controller=e,this.row=n,this.col=r})),m=function(){function t(e,n){s(this,t),this.controller=e,this.model=n}return a(t,[{key:"displayScore",value:function(){document.getElementById("score").textContent="Рахунок: ".concat(this.model.guesses)}},{key:"displayMessage",value:function(t){document.getElementById("messageArea").innerHTML=t}},{key:"displayHit",value:function(t){t.classList.add("hit")}},{key:"displayMiss",value:function(t){t.classList.add("miss")}}]),t}();function y(t,e,n){return(e=O(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function d(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&p(t,e)}function p(t,e){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},p(t,e)}function v(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=g(t);if(e){var o=g(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===k(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return b(t)}(this,n)}}function b(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function g(t){return g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},g(t)}function w(t,e){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.add(t)}function S(t,e,n){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return n}function k(t){return k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},k(t)}function E(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function M(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,O(r.key),r)}}function j(t,e,n){return e&&M(t.prototype,e),n&&M(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function O(t){var e=function(t,e){if("object"!==k(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==k(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===k(e)?e:String(e)}var B=function(){function t(){E(this,t)}return j(t,[{key:"execute",value:function(){throw new Error("Method not implemented.")}}]),t}(),C=new WeakSet,P=function(t){d(n,t);var e=v(n);function n(t,r){var o;return E(this,n),w(b(o=e.call(this)),C),o.controller=t,o.buttonElement=r,o}return j(n,[{key:"execute",value:function(){S(this,C,T).call(this)}}]),n}(B);function T(){this.buttonElement.classList.add("hidden")}var I=new WeakSet,L=function(t){d(n,t);var e=v(n);function n(t,r){var o;return E(this,n),w(b(o=e.call(this)),I),o.controller=t,o.buttonElement=r,o}return j(n,[{key:"execute",value:function(){S(this,I,x).call(this)}}]),n}(B);function x(){this.buttonElement.classList.remove("hidden")}var G=new WeakSet,H=function(t){d(n,t);var e=v(n);function n(t,r){var o;return E(this,n),w(b(o=e.call(this)),G),o.controller=t,o.buttonElement=r,o}return j(n,[{key:"execute",value:function(){S(this,G,z).call(this),this.controller.clickItemMenu()}}]),n}(B);function z(){this.buttonElement.execute()}var A=new WeakSet,_=function(t){d(n,t);var e=v(n);function n(t,r){var o;return E(this,n),w(b(o=e.call(this)),A),o.controller=t,o.buttonElement=r,o}return j(n,[{key:"execute",value:function(){S(this,A,R).call(this)}}]),n}(B);function R(){this.buttonElement.classList.contains("hidden")?this.buttonElement.classList.remove("hidden"):this.buttonElement.classList.add("hidden")}var N=function(){function t(){E(this,t),y(this,"menuItemsContainer",document.getElementById("menu-items-container")),y(this,"listMenuItems",document.getElementsByClassName("menu-item"))}return j(t,[{key:"getMenuItemsContainer",value:function(){return this.menuItemsContainer}},{key:"getListMenuItems",value:function(){return this.listMenuItems}}]),t}(),V=function(){function t(){E(this,t),y(this,"menuToggle",document.getElementById("menu-toggle"))}return j(t,[{key:"getMenuToggle",value:function(){return this.menuToggle}}]),t}(),W=function(t){d(n,t);var e=v(n);function n(t,r){var o;return E(this,n),(o=e.call(this)).controller=t,o.buttonElement=r,o}return j(n,[{key:"execute",value:function(t){this.controller.handleMenuItemClick(t)}}]),n}(B),$=function(t){d(n,t);var e=v(n);function n(t,r){var o;return E(this,n),(o=e.call(this)).controller=t,o.buttonElement=r,o}return j(n,[{key:"execute",value:function(){this.buttonElement.hideBtn(),this.controller.handleStartGameClick()}}]),n}(B),D=function(){function t(){E(this,t),y(this,"startBtn",document.getElementById("start-game"))}return j(t,[{key:"getStartBtn",value:function(){return this.startBtn}},{key:"hideBtn",value:function(){this.startBtn.classList.add("display-none")}}]),t}(),Y=function(){function t(e,n,r){var o=this;E(this,t),y(this,"optionCss",1),this.controller=e,this.command=r,this.buttonElement=n,Array.isArray(this.buttonElement)?this.buttonElement.forEach((function(t){t.onclick=function(){o.command.execute(t.classList[o.optionCss])}})):this.buttonElement.onclick=function(){o.execute()}}return j(t,[{key:"execute",value:function(){this.command.execute()}}]),t}();function q(t){return q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},q(t)}function F(t){return function(t){if(Array.isArray(t))return J(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return J(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?J(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function J(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function K(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function U(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==q(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==q(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===q(o)?o:String(o)),r)}var o}function Q(t,e,n){return e&&U(t.prototype,e),n&&U(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}var X=function(){function t(e){K(this,t),this.controller=e,this.menuToggle=new V,this.menuitems=new N,this.startBtn=new D,this.hideMenuCommand=new P(this,this.menuToggle.getMenuToggle()),this.clickBurgerMenuCommand=new Y(this,this.menuToggle.getMenuToggle(),new H(this,this.hideMenuCommand)),this.menuItemCmd=new Y(this,F(this.menuitems.getListMenuItems()),new W(this,F(this.menuitems.getListMenuItems()))),this.menuItemsCommand=new _(this.controller,this.menuitems.getMenuItemsContainer()),this.clickStartBtn=new Y(this,this.startBtn.getStartBtn(),new $(this,this.startBtn)),this.unHideMenuCommand=new L(this,this.menuToggle.getMenuToggle())}return Q(t,[{key:"clickItemMenu",value:function(){this.menuItemsCommand.execute()}},{key:"handleMenuItemClick",value:function(t){this.clickItemMenu(),this.startBtn.hideBtn(),this.controller.boardGenerator.clean(),this.controller.boardGenerator.generateGrid(t),this.controller.model.setBoardSize(t),this.controller.init(),this.controller.model.guesses=0,this.controller.view.displayScore(),this.controller.view.displayMessage("")}},{key:"handleStartGameClick",value:function(){this.hideMenuCommand.execute(),this.controller.boardGenerator.clean(),this.controller.boardGenerator.generateGrid(this.controller.model.getBoardSize()),this.controller.init()}}]),t}(),Z=function(){function t(e){K(this,t),this.model=e,this.view=new m(this,e),this.menuController=new X(this),this.boardGenerator=new c,this.statistic=new f}return Q(t,[{key:"updateGameView",value:function(t,e,n){t(e),this.view.displayMessage(n.msg),this.view.displayScore(),n.isOver&&(this.menuController.unHideMenuCommand.execute(),this.boardGenerator.clean(),this.boardGenerator.generateGrid(0),this.statistic.getStatistic(this.model.guesses),this.model.clearHits(),this.model.shipsSunk=0)}},{key:"init",value:function(){var t=this;document.querySelectorAll(".cell").forEach((function(e){var n=e.dataset.row,r=e.dataset.col;new h(t,n,r).element=e,e.addEventListener("click",(function(){var o={row:n,col:r},i=t.model.fire(o);i.isHit?t.updateGameView(t.view.displayHit,e,i):t.updateGameView(t.view.displayMiss,e,i)}))})),this.startGame()}},{key:"startGame",value:function(){this.model.generateShipLocations()}}]),t}();function tt(t){return tt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},tt(t)}function et(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==tt(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==tt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===tt(o)?o:String(o)),r)}var o}function nt(t,e,n){return e&&et(t.prototype,e),n&&et(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}var rt=nt((function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.model=new o,this.controller=new Z(this.model)}));console.log(),console.log("Hello, this is Coursework, author: ".concat(e.v)),console.log(),new rt})();